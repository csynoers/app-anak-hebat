<template>
  <div class="page" data-name="home">
    <!-- Top Navbar -->
    <div class="navbar navbar-large">
      <div class="navbar-bg"></div>
      <div class="navbar-inner">
        <div class="left">
          <a href="#" class="link icon-only panel-open" data-panel="left">
            <i class="icon f7-icons if-not-md">menu</i>
            <i class="icon material-icons if-md">menu</i>
          </a>
        </div>
        <div class="title sliding">Anak Hebat</div>
        <div class="right">
          <a href="#" class="link icon-only panel-open" data-panel="right">
            <i class="icon f7-icons if-not-md">menu</i>
            <i class="icon material-icons if-md">menu</i>
          </a>
        </div>
        <div class="title-large">
          <div class="title-large-text">Anak Hebat</div>
        </div>
      </div>
    </div>
    <!-- Toolbar-->
    <!-- Additional "tabbar-labels" class -->
    <div class="toolbar tabbar tabbar-labels toolbar-bottom">
      <div class="toolbar-inner">
        <a href="#" class="tab-link tab-link-active">
          <i class="icon f7-icons">house</i>
          <!-- Label text -->
          <span class="tabbar-label">Home</span>
        </a>
        <a href="#" class="tab-link">
          <i class="icon f7-icons">list_dash</i>
          <!-- Label text -->
          <span class="tabbar-label">Kategori</span>
        </a>
        <a href="#" class="tab-link">
          <i class="icon f7-icons">cart<span class="badge color-red">5</span></i>
          <!-- Label text -->
          <span class="tabbar-label">Keranjang</span>
        </a>
        <a href="#" class="tab-link">
          <i class="icon f7-icons">envelope_fill</i>
          <!-- Label text -->
          <span class="tabbar-label">Inbox</span>
        </a>
        <a href="/register-member/" class="tab-link">
          <i class="icon f7-icons">person_alt_circle</i>
          <!-- Label text -->
          <span class="tabbar-label">Akun</span>
        </a>
      </div>
    </div>
    <!-- Scrollable page content-->
    <div class="page-content">
      
      <!-- swiper-init to initialize swiper automatically -->
      <div class="swiper-container swiper-main-slide">
        <div class="swiper-wrapper" style="min-height: 150px !important;"></div>
        <!-- Pagination, if required -->
        <div class="swiper-pagination"></div>
      </div>
     
      <div class="block">
        <a href="" class="padding"><img src="https://via.placeholder.com/50.png?text=icon 1"></a>
        <a href="" class="padding"><img src="https://via.placeholder.com/50.png?text=icon 2"></a>
        <a href="" class="padding"><img src="https://via.placeholder.com/50.png?text=icon 3"></a>
        <a href="" class="padding"><img src="https://via.placeholder.com/50.png?text=icon 4"></a>
        <a href="" class="padding"><img src="https://via.placeholder.com/50.png?text=icon 5"></a>
        <a href="" class="padding"><img src="https://via.placeholder.com/50.png?text=icon 6"></a>
        <a href="" class="padding"><img src="https://via.placeholder.com/50.png?text=icon 7"></a>
        <a href="" class="padding"><img src="https://via.placeholder.com/50.png?text=icon 8"></a>
      </div>

      <!-- Static Navbar -->
      <div class="navbar">
        <div class="navbar-inner">
          <div class="left"></div>
          <div class="title"><small>New Release</small></div>
          <div class="right">
            <a class="link" @click="releaseBook('new-release')">
              <small>view all<i style="font-size: inherit;" class="icon f7-icons">chevron_right</i></small>
            </a>
          </div>
        </div>
      </div>
      <!-- swiper-init to initialize swiper automatically -->
      <div class="block">
        <div class="swiper-container swiper-new-release">
          <div class="swiper-wrapper" style="min-height: 150px!important;"></div>
        </div>
      </div>

      <!-- Static Navbar -->
      <div class="navbar">
        <div class="navbar-inner">
          <div class="left"></div>
          <div class="title"><small>Coming Soon</small></div>
          <div class="right">
            <a class="link">
              <small>view all<i style="font-size: inherit;" class="icon f7-icons">chevron_right</i></small>
            </a>
          </div>
        </div>
      </div>
      <!-- swiper-init to initialize swiper automatically -->
      <div class="block">
        <div class="swiper-container swiper-coming-soon">
          <div class="swiper-wrapper" style="min-height: 150px!important;"></div>
        </div>
      </div>

      <!-- Static Navbar -->
      <div class="navbar">
        <div class="navbar-inner">
          <div class="left"></div>
          <div class="title"><small>Recomended Book</small></div>
          <div class="right">
            <a class="link">
              <small>view all<i style="font-size: inherit;" class="icon f7-icons">chevron_right</i></small>
            </a>
          </div>
        </div>
      </div>
      <!-- swiper-init to initialize swiper automatically -->
      <div class="block">
        <div class="swiper-container swiper-recomended-book">
          <div class="swiper-wrapper" style="min-height: 150px!important;"></div>
        </div>
      </div>

      <div class="block-title">Navigation</div>
      <div class="list">
        <ul>
          <li>
            <a href="/about/" class="item-content item-link">
              <div class="item-inner">
                <div class="item-title">About</div>
              </div>
            </a>
          </li>
          <li>
            <a href="/form/" class="item-content item-link">
              <div class="item-inner">
                <div class="item-title">Form</div>
              </div>
            </a>
          </li>
        </ul>
      </div>

      <div class="block-title">Modals</div>
      <div class="block block-strong">
        <div class="row">
          <div class="col-50">
            <a href="#" class="button button-raised button-fill popup-open" data-popup="#my-popup">Popup</a>
          </div>
          <div class="col-50">
            <a href="#" class="button button-raised button-fill login-screen-open" data-login-screen="#my-login-screen">Login Screen</a>
          </div>
        </div>
      </div>

      <div class="block-title">Panels</div>
      <div class="block block-strong">
        <div class="row">
          <div class="col-50">
            <a href="#" class="button button-raised button-fill panel-open" data-panel="left">Left Panel</a>
          </div>
          <div class="col-50">
            <a href="#" class="button button-raised button-fill panel-open" data-panel="right">Right Panel</a>
          </div>
        </div>
      </div>

      <div class="list links-list">
        <ul>
          <li>
            <a href="/dynamic-route/blog/45/post/125/?foo=bar#about">Dynamic (Component) Route</a>
          </li>
          <li>
            <a href="/load-something-that-doesnt-exist/">Default Route (404)</a>
          </li>
          <li>
            <a href="/request-and-load/user/123456/">Request Data & Load</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</template>
<script>
  export default {
    // Lifecycle Hooks
    beforeCreate() {
      console.log('componentBeforeCreate', this)
    },
    created() {
      console.log('componentCreated', this)
    },
    beforeMount() {
      console.log('componentBeforeMount', this)
    },
    mounted() {
      console.log('componentMounted', this);

      let $$ = this.$$;
      let app = this.$app;
      let router = this.$router;

      /* create data main slider */
      app.request.getJSON('https://m.anakhebatindonesia.com/slide', function (data) {
        let rows = [];
        for (let index = 0; index < data.length; index++) {          
          rows.push(`
            <div class="swiper-slide">
              <img data-src="${data[index].image.original}" class="swiper-lazy" width="100%">
              <div class="swiper-lazy-preloader" style="width:100px;height:100px;margin-top:5px;margin-left:-50px"></div>
            </div>
          `);
        }
        rows = rows.join('');
        /* inject data slide */
        $$('.swiper-main-slide > .swiper-wrapper').html(rows);

        app.swiper.create('.swiper-main-slide', {
          // Disable preloading of all images
          preloadImages: false,
          // Enable lazy loading
          lazy: true,
          loop: true,     
          autoplay: {
            delay: 2000,
          },
          slidesPerView: 1,
          // speed: 400,
          spaceBetween: 0,
          pagination: {
            el: '.swiper-pagination',
            type: 'bullets',
          },
        });

      });

      /* create swiper new release */
      app.request.getJSON('https://m.anakhebatindonesia.com/books?release=new-release', function (data) {
        let rows = [];
        for (let index = 0; index < data.rows.length; index++) {
          rows.push(`
            <div class="swiper-slide swiper-slide-border swiper-href" data-href="/book/${data.rows[index].id}">
              <img data-src="${data.rows[index].image.thumbnail}" class="swiper-lazy" width="100%">
              <div class="swiper-lazy-preloader" style="width:100px;height:100px;margin-top:5px;margin-left:-50px"></div>
              <center>
                <div class="book-title-wrap">
                  ${data.rows[index].title}
                </div>
                <div class="text-currency-primary">
                  <span class="text-currency-format">Rp</span>${data.rows[index].price.idr.text}
                </div>
              </center>
            </div>
          `);
          // console.log(data.rows[index])
        }
        rows = rows.join('');
        $$('.swiper-new-release > .swiper-wrapper').html(rows);

        app.swiper.create('.swiper-new-release', {
          // Disable preloading of all images
          preloadImages: false,
          // Enable lazy loading
          // loop: true,
          lazy: true, 
          slidesPerView: 3,
          spaceBetween: 10,
        });

        // event to load detail buku;
        $$('.swiper-href').on('click',function(e){
          let dataHref = $$(this).data('href');
          router.navigate(dataHref,{ transition: 'f7-flip' })
        })
      });

      /* create swiper coming soon */
      app.request.getJSON('https://m.anakhebatindonesia.com/books?release=coming-soon', function (data) {
        let rows = [];
        for (let index = 0; index < data.rows.length; index++) {
          rows.push(`
            <div class="swiper-slide swiper-slide-border swiper-href" data-href="/book/${data.rows[index].id}">
              <img data-src="${data.rows[index].image.thumbnail}" class="swiper-lazy" width="100%">
              <div class="swiper-lazy-preloader" style="width:100px;height:100px;margin-top:5px;margin-left:-50px"></div>
              <center>
                <div class="book-title-wrap">
                  ${data.rows[index].title}
                </div>
                <div class="text-currency-primary">
                  <span class="text-currency-format">Rp</span>${data.rows[index].price.idr.text}
                </div>
              </center>
            </div>
          `);
          // console.log(data.rows[index])
        }
        rows = rows.join('');
        $$('.swiper-coming-soon > .swiper-wrapper').html(rows);

        app.swiper.create('.swiper-coming-soon', {
          // Disable preloading of all images
          preloadImages: false,
          // Enable lazy loading
          // loop: true,
          lazy: true, 
          slidesPerView: 3,
          spaceBetween: 10,
        });

        // event to load detail buku;
        $$('.swiper-href').on('click',function(e){
          let dataHref = $$(this).data('href');
          router.navigate(dataHref,{ transition: 'f7-flip' })
        })

      });

      /* create swiper recomended book */
      app.request.getJSON('https://m.anakhebatindonesia.com/books?release=best-seller', function (data) {
        let rows = [];
        for (let index = 0; index < data.rows.length; index++) {
          rows.push(`
            <div class="swiper-slide swiper-slide-border swiper-href" data-href="/book/${data.rows[index].id}">
              <img data-src="${data.rows[index].image.thumbnail}" class="swiper-lazy" width="100%">
              <div class="swiper-lazy-preloader" style="width:100px;height:100px;margin-top:5px;margin-left:-50px"></div>
              <center>
                <div class="book-title-wrap">
                  ${data.rows[index].title}
                </div>
                <div class="text-currency-primary">
                  <span class="text-currency-format">Rp</span>${data.rows[index].price.idr.text}
                </div>
              </center>
            </div>
          `);
          // console.log(data.rows[index])
        }
        rows = rows.join('');
        $$('.swiper-recomended-book > .swiper-wrapper').html(rows);

        app.swiper.create('.swiper-recomended-book', {
          // Disable preloading of all images
          preloadImages: false,
          // Enable lazy loading
          // loop: true,
          lazy: true, 
          slidesPerView: 3,
          spaceBetween: 10,
        });

        // event to load detail buku;
        $$('.swiper-href').on('click',function(e){
          let dataHref = $$(this).data('href');
          router.navigate(dataHref,{ transition: 'f7-flip' })
        })

      });


    },
    beforeDestroy() {
      console.log('componentBeforeDestroy', this);
    },
    destroyed() {
      console.log('componentDestroyed', this);
    },
    // Component Data
    data: function () {
      // Must return an object
      return {
        name: 'Jimmy',
        age: 25,
        like: ['Tennis', 'Chess', 'Football'],
        // slide: [
        //   {
        //     image: `<div class="swiper-slide"><img src="https://via.placeholder.com/360x200.png?text=slide 1"></div>`,
        //   },
        //   {
        //     image: `<div class="swiper-slide"><img src="https://via.placeholder.com/360x200.png?text=slide 2"></div>`,
        //   },
        //   {
        //     image: `<div class="swiper-slide"><img src="https://via.placeholder.com/360x200.png?text=slide 3"></div>`,
        //   },
        // ],
        
      }
    },
    // Component Methods
    methods: {
      openAlert: function () {
        var self = this;
        self.$app.dialog.alert('Hello World');
      },
      releaseBook: function (release) {
        console.log('release : ',release);
        let app = this.$app;
        app.request.getJSON(`https://m.anakhebatindonesia.com/books?release=${release}`, function (data) {
        let rows = [];
        for (let index = 0; index < data.rows.length; index++) {
          rows.push(`
            <div class="swiper-slide swiper-slide-border swiper-href" data-href="/book/${data.rows[index].id}">
              <img data-src="${data.rows[index].image.thumbnail}" class="swiper-lazy" width="100%">
              <div class="swiper-lazy-preloader" style="width:100px;height:100px;margin-top:5px;margin-left:-50px"></div>
              <center>
                <div class="book-title-wrap">
                  ${data.rows[index].title}
                </div>
                <div class="text-currency-primary">
                  <span class="text-currency-format">Rp</span>${data.rows[index].price.idr.text}
                </div>
              </center>
            </div>
          `);
          // console.log(data.rows[index])
        }
        console.log('rows',rows);
        // rows = rows.join('');
        // $$('.swiper-recomended-book > .swiper-wrapper').html(rows);

        // event to load detail buku;
        // $$('.swiper-href').on('click',function(e){
        //   let dataHref = $$(this).data('href');
        //   router.navigate(dataHref,{ transition: 'f7-flip' })
        // })

      });
      },
    },
    // Page Events
    on: {
      pageMounted: function(e, page) {
        console.log('pageMounted', page);
      },
      pageInit: function(e, page) {
        console.log('pageInit', page);
      },
      pageBeforeIn: function(e, page) {
        console.log('pageBeforeIn', page);
      },
      pageAfterIn: function(e, page) {
        console.log('pageAfterIn', page);
      },
      pageBeforeOut: function(e, page) {
        console.log('pageBeforeOut', page);
      },
      pageAfterOut: function(e, page) {
        console.log('pageAfterOut', page);
      },
      pageBeforeRemove: function(e, page) {
        console.log('pageBeforeRemove', page);
      },
    }
  }
</script>