<template>
  <div class="page" data-name="static-page">
    <div class="navbar">
      <div class="navbar-bg"></div>
      <div class="navbar-inner sliding">
        <div class="left">
          <a href="#" class="link back">
            <i class="icon icon-back"></i>
            <span class="if-not-md">Back</span>
          </a>
        </div>
        <div class="title">{{this.$route.hash}}</div>
        <!-- <div class="right">
          <a href="#" class="link icon-only panel-open" data-panel="right">
            <i class="icon f7-icons">cart</i>
          </a>
        </div> -->
      </div>
    </div>   
    <div class="page-content"></div>
  </div>
</template>
<style>
  /* p {
    margin: 10px 0;
  } */
</style>
<script>
  export default {
    // Lifecycle Hooks
    beforeCreate() {
      console.log('componentBeforeCreate', this)
    },
    created() {
      console.log('componentCreated', this)
    },
    beforeMount() {
      console.log('componentBeforeMount', this)
    },
    mounted() {

      console.log('componentMounted', this);

      let $$ = this.$$;
      let app = this.$app;
      let router = this.$router;
      let pageName = this.$route.params.pageName;
      let page = $$('.page[data-name="static-page"]');
      let pageContent = page.find('.page-content')

      app.preloader.show();
      switch ( pageName ) {
        case 'faq':
          /* get detail buku */
          app.request.getJSON(`https://m.anakhebatindonesia.com/faqs`, function (data) {
            let rowsAccordion = [];
            data.forEach(function(d){
              rowsAccordion.push(`
                <li class="accordion-item"><a href="#" class="item-content item-link">
                    <div class="item-inner">
                      <div class="item-title">${d.q}</div>
                    </div></a>
                  <div class="accordion-item-content">
                    <div class="block">
                      <p>${d.a}</p>
                    </div>
                  </div>
                </li>
              `);
            });
            rowsAccordion.join('');
            pageContent.html(`
              <!-- Separate collapsibles - omit "accordion-list" class-->
              <div class="block">FAQ (Frequently asked questions) apakah anda ingin mengetahui sesuatu mengenai kami?</div>
              <div class="list">
                <ul>
                  ${rowsAccordion}
                </ul>
              </div>       
            `);
          });
          
          break;
      
        default:
          break;
      }
      app.preloader.hide();
      
    },
    beforeDestroy() {
      console.log('componentBeforeDestroy', this);
    },
    destroyed() {
      console.log('componentDestroyed', this);
    },
    // Component Data
    data: function () {
      // Must return an object
      return {
        name: 'Jimmy',
        age: 25,
        like: ['Tennis', 'Chess', 'Football'],
      }
    },
    // Component Methods
    methods: {
      openAlert: function (data) {
        var self = this;
        self.$app.dialog.alert(data);
      },
      getDateDMY: function(dateValue) {
        var mydate = new Date(dateValue);
        var month = ["January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"][mydate.getMonth()];
        var str = mydate.getDay() + ' ' +	month + ' ' + mydate.getFullYear();
        return str;
      }
    },
    // Page Events
    on: {
      pageMounted: function(e, page) {
        console.log('pageMounted', page);
      },
      pageInit: function(e, page) {
        console.log('pageInit', page);
      },
      pageBeforeIn: function(e, page) {
        console.log('pageBeforeIn', page);
      },
      pageAfterIn: function(e, page) {
        let app = this.$app;
        app.toolbar.hide('.toolbar-main');
        console.log('pageAfterIn', page);
      },
      pageBeforeOut: function(e, page) {
        console.log('pageBeforeOut', page);
      },
      pageAfterOut: function(e, page) {
        console.log('pageAfterOut', page);
      },
      pageBeforeRemove: function(e, page) {
        console.log('pageBeforeRemove', page);
      },
    }
  }
</script>
